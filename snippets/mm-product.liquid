{% assign product_box = forloop.index | minus:1 %}
{% assign delay_time = 50 | times : product_box %}
{% comment ls-rpl %}{%- assign img_url = product.featured_image | img_url: '1x1' | replace: '_1x1.', '_{width}x.' -%}{% endcomment %}{%- capture LS_IMG_URL -%}{%- render "ls-img-url", image: product.featured_image, img_url: '1x1' -%}{%- endcapture -%}{%- assign img_url = LS_IMG_URL | replace: '_1x1.', '_{width}x.' -%}{% comment /ls-rpl %}{% endcomment %}
{%- assign grid_image_scale = '2' -%}
<div class="grid_bx style1">
	<div class="grid_img_wr">
		<a class="grid-view-item__link grid_img lazyload" href="{{ product.url | within: collection }}" data-bgset="{% include 'prgrid-img', image: product.featured_image %}" data-sizes="auto" data-parent-fit="contain"></a>
      	<!-- product label -->
      	{% unless block.type == 'megamenu2' %}
		{% if settings.pr_lbl %}
            <span class="pr_lbl">
              {%- if settings.sale_lbl and product.compare_at_price > product.price and settings.sale_lbl -%}
                {% if settings.sale_label_style == "salelabel" %}
                  <label class="lbl on-sale">{{ 'products.product.on_sale' | t}}</label>
                {% else %}
                  <label class="lbl on-sale">-{{ product.compare_at_price_min | minus: product.price | times: 100 | divided_by: product.compare_at_price_min }}%</label>
                {% endif %}
              {%- endif -%}
              {%- assign badges = product.metafields.custom.product_badges.value -%}
              {%- if badges != blank -%}
                {%- for badge in badges -%}
                  <label class="lbl" style="background-color: {{ badge.bg_color }}; color: {{ badge.text_color }}">{{ badge.label }}</label>
                {%- endfor -%}
              {%- endif -%}

              {%- if product.tags contains settings.pr_label1 -%}<label class="lbl pr_lbl1" style=" background-color: {{ settings.pr_label1_cl }};" >{{settings.pr_label1}}</label>{%- endif -%}
              {%- if product.tags contains settings.pr_label2 -%}<label class="lbl pr_lbl2" style=" background-color: {{ settings.pr_label2_cl }};">{{settings.pr_label2}}</label>{%- endif -%}
              {%- if product.tags contains settings.pr_label3 -%}<label class="lbl pr_lbl3" style=" background-color: {{ settings.pr_label3_cl }};">{{settings.pr_label3}}</label>{%- endif -%}
              {%- unless product.available -%}<label class="lbl sold-out"><span>{{ 'products.product.sold_out' | t}}</span></label>{%- endunless -%}
            </span>
        {% endif %}
      	{% endunless %}
    </div>
    <div class="details">
      	{% if settings.show_vendor %}<div class="grid_vendor">{{ product.vendor }}</div>{% endif %}
        <a href="{{ product.url | within: collection }}" class="grid_title">{{ product.title }}</a>
      	{%- unless settings.catalog-mode -%}<div class="grid_meta">{% include 'product-price' %}</div>{% endunless %}
	</div>
</div>
